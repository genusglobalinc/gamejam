# Twilio Call Bot with Google WaveNet and IBM Watson Tone Analysis

This project is a conversational bot for handling live calls through Twilio. It uses **Google Cloud Speech-to-Text** to transcribe the caller's audio, **OpenAI GPT-4** for dynamic responses, **IBM Watson Tone Analyzer** to adjust tone, and **Google Cloud WaveNet Voices** for natural speech synthesis.

## Features

- Real-time call handling with Twilio.
- Transcription of caller's audio using Google Cloud Speech-to-Text.
- Conversational responses generated by OpenAI's GPT-4.
- Tone analysis using IBM Watson Tone Analyzer to detect emotions in the caller's voice.
- Google WaveNet Voices for human-like voice synthesis with inflection.

## Pre-requisites

Before setting up and running the project, you’ll need the following:

### 1. Hardware Requirements

- A **Raspberry Pi 4** (or similar device) to run the Flask server.

### 2. Accounts and API Keys

- **Twilio Account**: To handle incoming phone calls and record audio.
  - Create a Twilio account at https://www.twilio.com.
  - Get a phone number for your Twilio account.

- **Google Cloud Account**: To use Speech-to-Text and WaveNet voices.
  - Set up a Google Cloud project at https://console.cloud.google.com.
  - Enable the **Google Cloud Speech-to-Text API** and **Text-to-Speech API**.
  - Generate a **Service Account Key** and download the JSON key file.

- **IBM Watson Tone Analyzer**: For tone analysis.
  - Create an IBM Watson Tone Analyzer service at https://cloud.ibm.com.
  - Obtain the **API key** and **Service URL** from your IBM Cloud dashboard.

- **OpenAI Account**: To interact with GPT-4 for generating responses.
  - Obtain an API key from https://beta.openai.com.

### 3. Python Libraries

Install the following Python libraries using `pip`:

pip install flask twilio openai google-cloud-speech google-cloud-texttospeech ibm-watson requests

### 4. Environment Variables
Make sure to export your Google Cloud Service Account credentials and set up your other API keys before running the application. For example:

export GOOGLE_APPLICATION_CREDENTIALS="/path/to/your/google-cloud-key.json"

### 5. Raspberry Pi Setup
Ensure your Raspberry Pi is running Python 3.x.
Install Flask and other dependencies as mentioned in the Python Libraries section.
Make sure your Raspberry Pi has internet access to communicate with Twilio and the APIs.

Instructions
1. Clone the Repository

git clone https://github.com/your-repo/twilio-call-bot.git
cd twilio-call-bot

2. Configure Twilio
Log into your Twilio account and go to the Phone Numbers section.
Set the Webhook URL for your Twilio phone number to point to your Flask server (e.g., http://your-ip:5000/answer_call).

3. Run the Flask Server
Start the Flask server on your Raspberry Pi:

python3 app.py

The server will listen for incoming calls from Twilio.

### 6. Testing

Call the Twilio number that you've set up.
The bot will transcribe your words, analyze your tone, generate a response using GPT-4, and respond with a WaveNet voice.
5. Modify Configuration
You can adjust the voice pitch and speaking rate for the WaveNet synthesis in the synthesize_speech function inside app.py.
The ask_chatgpt function can be customized for different conversational flows depending on the detected tone.


### How It Works
Answering the Call:

The bot answers an incoming call and prompts the caller to speak.
Transcribing Audio:

The recorded audio is sent to the Google Cloud Speech-to-Text API, configured to handle Twilio’s 8 kHz WAV format.
Tone Analysis:

The transcribed text is analyzed using IBM Watson Tone Analyzer to understand the emotional tone of the caller.
Response Generation:

The bot uses OpenAI GPT-4 to generate a response based on the caller's input, adjusted for tone.
Speech Synthesis:

The response is converted to speech using Google WaveNet, with basic inflection adjustments for a more human-like tone.
Continuing the Conversation:

The process continues as needed, with the bot responding dynamically based on the caller’s input.
API Reference
Twilio: https://www.twilio.com/docs/voice
Google Cloud Speech-to-Text: https://cloud.google.com/speech-to-text
Google Cloud Text-to-Speech (WaveNet): https://cloud.google.com/text-to-speech
IBM Watson Tone Analyzer: https://cloud.ibm.com/apidocs/tone-analyzer
OpenAI GPT-4: https://beta.openai.com/docs/
License
This project is licensed under the MIT License - see the LICENSE file for details.


### Steps Covered in the `README.md`:

- **Pre-requisites**: Details all accounts (Twilio, Google Cloud, IBM Watson, OpenAI) and hardware (Raspberry Pi) needed.
- **Setup**: Guides you through installing the necessary Python libraries and configuring environment variables.
- **Twilio Setup**: Explains how to configure Twilio to use your Flask server for handling calls.
- **Running the Application**: How to start the Flask server on the Raspberry Pi and test it.
- **Configuration Options**: Describes how to tweak voice settings and adjust the chatbot's responses.

This should help you get everything set up on your Raspberry Pi for the call bot system. Let me know if you need further adjustments or clarification!






